<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script
  src="https://code.jquery.com/jquery-3.3.1.js"
  integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
  crossorigin="anonymous"></script>

    <title>Survey</title>
  </head>
  <body>
   
    <div class="container">
        <div class="jumbotron bg-info">
            <h1 class="text-center text-light">Your new friend awaits...</h1>
        </div>

        <form>
            <div class="form-group">
                <label for="formName">Your Name</label>
                <input type="text" class="form-control" id="formName" placeholder="Name">
            </div>
            <div class="form-group">
                <label for="image">Image link</label>
                <input type="text" class="form-control" id="formImage" placeholder="Image link">
            </div>
            <h1>Rate each question from a 1 - 5, with 5 being most likely</h1>
            <div class="form-group">
              <label for="q1">You're a sports fan</label>
              <select class="form-control" id="q1">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
              </select>
            </div>
            <div class="form-group">
                <label for="q2">You enjoy live music</label>
                <select class="form-control" id="q2">
                  <option>1</option>
                  <option>2</option>
                  <option>3</option>
                  <option>4</option>
                  <option>5</option>
                </select>
              </div>
              <div class="form-group">
                <label for="q3">You're willing to try new and exotic foods</label>
                <select class="form-control" id="q3">
                  <option>1</option>
                  <option>2</option>
                  <option>3</option>
                  <option>4</option>
                  <option>5</option>
                </select>
              </div>
              <div class="form-group">
                <label for="q4">You enjoy the outdoors</label>
                <select class="form-control" id="q4">
                  <option>1</option>
                  <option>2</option>
                  <option>3</option>
                  <option>4</option>
                  <option>5</option>
                </select>
              </div>
              <div class="form-group">
                <label for="q5">You're an extrovert</label>
                <select class="form-control" id="q5">
                  <option>1</option>
                  <option>2</option>
                  <option>3</option>
                  <option>4</option>
                  <option>5</option>
                </select>
              </div>
              <div class="form-group">
                <label for="q6">You enjoy video games</label>
                <select class="form-control" id="q6">
                  <option>1</option>
                  <option>2</option>
                  <option>3</option>
                  <option>4</option>
                  <option>5</option>
                </select>
              </div>
              <div class="form-group">
                <label for="q7">Spring is your favorite season</label>
                <select class="form-control" id="q7">
                  <option>1</option>
                  <option>2</option>
                  <option>3</option>
                  <option>4</option>
                  <option>5</option>
                </select>
              </div>
              <div class="form-group">
                <label for="q8">Exercise is important to you</label>
                <select class="form-control" id="q8">
                  <option>1</option>
                  <option>2</option>
                  <option>3</option>
                  <option>4</option>
                  <option>5</option>
                </select>
              </div>
              <div class="form-group">
                <label for="q9">You'll be forever alone</label>
                <select class="form-control" id="q9">
                  <option>1</option>
                  <option>2</option>
                  <option>3</option>
                  <option>4</option>
                  <option>5</option>
                </select>
              </div>
              <div class="form-group">
                <label for="q10">You enjoyed this survey</label>
                <select class="form-control" id="q10">
                  <option>1</option>
                  <option>2</option>
                  <option>3</option>
                  <option>4</option>
                  <option>5</option>
                </select>
              </div>
            
          </form>

          <button type="submit" class="btn btn-primary btn-lg btn-block" id="submit">Submit</button>
        <br>
        
        <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  ...
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
              </div>
            </div>
          </div>
      
        
        <footer class="footer">
                <div class="container">
                    <p><a href="/api/friends">API Friend List</a></p>
                </div>
            </footer>

    </div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
  </body>
</html>

<script type="text/JavaScript">
  $("#submit").on("click", function(event) {
      event.preventDefault();

      var newUser = {
        name: $("#formName").val().trim(),
        photo: $("#formImage").val().trim(),
        scores: [
          parseInt($("#q1").val().trim()),
          parseInt($("#q2").val().trim()),
          parseInt($("#q3").val().trim()),
          parseInt($("#q4").val().trim()),
          parseInt($("#q5").val().trim()),
          parseInt($("#q6").val().trim()),
          parseInt($("#q7").val().trim()),
          parseInt($("#q8").val().trim()),
          parseInt($("#q9").val().trim()),
          parseInt($("#q10").val().trim())
        ]
      };


      console.log(newUser);

      $.post("/api/friends", newUser,
        function(data) {
          $("#formName").val("");
          $("#formImage").val("");
          $("#q1").val("");
          $("#q2").val("");
          $("#q3").val("");
          $("#q4").val("");
          $("#q5").val("");
          $("#q6").val("");
          $("#q7").val("");
          $("#q8").val("");
          $("#q9").val("");
          $("#q10").val("");

        $("#exampleModalLabel").html("<strong>Best Match:</strong> " + data.name);
        $(".modal-body").html("<img src="+ data.photo +" height="+ 300 + " width="+ 300+">");
        $('#exampleModal').modal("show");
        });
      
  });

</script>